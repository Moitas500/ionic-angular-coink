<form [formGroup]="accountDataForm" (ngSubmit)="onSubmit()">

  <h5>Documento de identidad</h5>

  <ion-list>
        <ion-item>

            @if(isDocumentsCharge()) {

                <ion-select 
                    interface="popover" 
                    labelPlacement="floating"
                    formControlName = "typeDocument"
                >
                <div slot="label" class="placeholder">
                    Tipo de documento
                </div>
                    @for (typeDocument of typeDocuments(); track $index) {
                        <ion-select-option [value]="typeDocument.description">
                            {{ typeDocument.description }}
                        </ion-select-option>
                    }
                </ion-select>

            } @else {
                <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><style>.spinner_EUy1{animation:spinner_grm3 1.2s infinite}.spinner_f6oS{animation-delay:.1s}.spinner_g3nX{animation-delay:.2s}.spinner_nvEs{animation-delay:.3s}.spinner_MaNM{animation-delay:.4s}.spinner_4nle{animation-delay:.5s}.spinner_ZETM{animation-delay:.6s}.spinner_HXuO{animation-delay:.7s}.spinner_YaQo{animation-delay:.8s}.spinner_GOx1{animation-delay:.9s}.spinner_4vv9{animation-delay:1s}.spinner_NTs9{animation-delay:1.1s}.spinner_auJJ{transform-origin:center;animation:spinner_T3O6 6s linear infinite}@keyframes spinner_grm3{0%,50%{animation-timing-function:cubic-bezier(.27,.42,.37,.99);r:1px}25%{animation-timing-function:cubic-bezier(.53,0,.61,.73);r:2px}}@keyframes spinner_T3O6{0%{transform:rotate(360deg)}100%{transform:rotate(0deg)}}</style><g class="spinner_auJJ"><circle class="spinner_EUy1" cx="12" cy="3" r="1"/><circle class="spinner_EUy1 spinner_f6oS" cx="16.50" cy="4.21" r="1"/><circle class="spinner_EUy1 spinner_NTs9" cx="7.50" cy="4.21" r="1"/><circle class="spinner_EUy1 spinner_g3nX" cx="19.79" cy="7.50" r="1"/><circle class="spinner_EUy1 spinner_4vv9" cx="4.21" cy="7.50" r="1"/><circle class="spinner_EUy1 spinner_nvEs" cx="21.00" cy="12.00" r="1"/><circle class="spinner_EUy1 spinner_GOx1" cx="3.00" cy="12.00" r="1"/><circle class="spinner_EUy1 spinner_MaNM" cx="19.79" cy="16.50" r="1"/><circle class="spinner_EUy1 spinner_YaQo" cx="4.21" cy="16.50" r="1"/><circle class="spinner_EUy1 spinner_4nle" cx="16.50" cy="19.79" r="1"/><circle class="spinner_EUy1 spinner_HXuO" cx="7.50" cy="19.79" r="1"/><circle class="spinner_EUy1 spinner_ZETM" cx="12" cy="21" r="1"/></g></svg>
            }

        </ion-item>
        <ion-item>
            <ion-input
                labelPlacement="floating"
                formControlName = "numDocument"
            >
                <div slot="label" class="placeholder">
                    Numero de documento
                </div>
            </ion-input>
        </ion-item>
        <ion-item>
            <ion-input
                labelPlacement="floating"
                formControlName = "expDocument"
                [ngClass]="{'error-input': accountDataForm.getError('dateExpError')}"
            >
                <div 
                    slot="label" 
                    class="placeholder" 
                    [ngClass]="{'error-input': accountDataForm.getError('dateExpError')}"
                >
                    Fecha de expedicion del documento (DD/MM/AAAA)
                </div>
            </ion-input>
        </ion-item>
        <ion-item>
            <ion-input
                labelPlacement="floating"
                formControlName = "birthday"
                [ngClass]="{'error-input': accountDataForm.getError('dateBirthError')}"
            >
                <div 
                    slot="label" 
                    class="placeholder" 
                    [ngClass]="{'error-input': accountDataForm.getError('dateBirthError')}"
                >
                    Fecha de nacimiento (DD/MM/AAAA)
                </div>
            </ion-input>
        </ion-item>
        <ion-item>

            @if ( isGendersCharge() ) {
                <ion-select 
                    interface="popover" 
                    labelPlacement="floating" 
                    formControlName = "gender"
                >
                <div slot="label" class="placeholder">
                    Genero
                </div>

                @for (gender of genders(); track $index) {
                    <ion-select-option [value]="gender.id">
                        {{ gender.notation }}
                    </ion-select-option>
                }
            </ion-select>
            } @else {
                <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><style>.spinner_EUy1{animation:spinner_grm3 1.2s infinite}.spinner_f6oS{animation-delay:.1s}.spinner_g3nX{animation-delay:.2s}.spinner_nvEs{animation-delay:.3s}.spinner_MaNM{animation-delay:.4s}.spinner_4nle{animation-delay:.5s}.spinner_ZETM{animation-delay:.6s}.spinner_HXuO{animation-delay:.7s}.spinner_YaQo{animation-delay:.8s}.spinner_GOx1{animation-delay:.9s}.spinner_4vv9{animation-delay:1s}.spinner_NTs9{animation-delay:1.1s}.spinner_auJJ{transform-origin:center;animation:spinner_T3O6 6s linear infinite}@keyframes spinner_grm3{0%,50%{animation-timing-function:cubic-bezier(.27,.42,.37,.99);r:1px}25%{animation-timing-function:cubic-bezier(.53,0,.61,.73);r:2px}}@keyframes spinner_T3O6{0%{transform:rotate(360deg)}100%{transform:rotate(0deg)}}</style><g class="spinner_auJJ"><circle class="spinner_EUy1" cx="12" cy="3" r="1"/><circle class="spinner_EUy1 spinner_f6oS" cx="16.50" cy="4.21" r="1"/><circle class="spinner_EUy1 spinner_NTs9" cx="7.50" cy="4.21" r="1"/><circle class="spinner_EUy1 spinner_g3nX" cx="19.79" cy="7.50" r="1"/><circle class="spinner_EUy1 spinner_4vv9" cx="4.21" cy="7.50" r="1"/><circle class="spinner_EUy1 spinner_nvEs" cx="21.00" cy="12.00" r="1"/><circle class="spinner_EUy1 spinner_GOx1" cx="3.00" cy="12.00" r="1"/><circle class="spinner_EUy1 spinner_MaNM" cx="19.79" cy="16.50" r="1"/><circle class="spinner_EUy1 spinner_YaQo" cx="4.21" cy="16.50" r="1"/><circle class="spinner_EUy1 spinner_4nle" cx="16.50" cy="19.79" r="1"/><circle class="spinner_EUy1 spinner_HXuO" cx="7.50" cy="19.79" r="1"/><circle class="spinner_EUy1 spinner_ZETM" cx="12" cy="21" r="1"/></g></svg>
            }

        </ion-item>
    </ion-list>

    <h5>Configura tu cuenta</h5>

    <ion-list>
        <ion-item>
            <ion-input
                labelPlacement="floating"
                formControlName = "email"
                [ngClass]="{'error-input': accountDataForm.getError('emailError')}"
            >
                <div slot="label" class="placeholder" [ngClass]="{'error-input': accountDataForm.getError('emailError')}">
                    Correo electronico
                </div>
            </ion-input>
        </ion-item>
        <ion-item>
            <ion-input
                labelPlacement="floating"
                formControlName = "confirmationEmail"
                [ngClass]="{'error-input': accountDataForm.getError('emailError')}"
            >
                <div slot="label" class="placeholder" [ngClass]="{'error-input': accountDataForm.getError('emailError')}">
                    Confirmar correo electronico
                </div>

                @if ( emailMathces() ) {
                    <ion-icon
                        class="check-email"
                        slot="end"
                        name="checkmark-outline" 
                        aria-hidden="true"
                    ></ion-icon>
                }

            </ion-input>
        </ion-item>
        <ion-item>
            <ion-input
                [type]="buttonPin() ? 'text' : 'password'"
                labelPlacement="floating"
                formControlName = "pin"
            >
                <div slot="label" class="placeholder">
                    PIN de seguridad
                </div>

                <ion-icon 
                    (click)="toogleButtonPin()"
                    slot="end"
                    [name]="buttonPin() ? 'eye' : 'eye-off-outline'" 
                    aria-hidden="true"
                ></ion-icon>
            </ion-input>
        </ion-item>
        <ion-item>
            <ion-input
                [ngClass]="{'error-input': accountDataForm.getError('pinError')}"
                [type]="buttonConfirmationPin() ? 'text' : 'password'"
                labelPlacement="floating"
                formControlName = "confirmationPIN"
                [errorText]="accountDataForm.getError('pinError') ? 'Este campo no coincide con el PIN' : ''"
            >
                <div 
                    slot="label" 
                    class="placeholder" 
                    [ngClass]="{'error-input': accountDataForm.getError('pinError')}"
                >
                    Confirmar PIN de seguridad
                </div>

                <ion-icon 
                    (click)="toogleConfirmationPin()"
                    slot="end"
                    [name]="buttonConfirmationPin() ? 'eye' : 'eye-off-outline'" 
                    aria-hidden="true"
                ></ion-icon>
            </ion-input>
        </ion-item>
    </ion-list>

    <button 
        type="submit" 
        [disabled]="!accountDataForm.valid" 
        [ngClass]="{'approved-button': accountDataForm.valid}"
    >
        SIGUIENTE
    </button>
  
</form>
